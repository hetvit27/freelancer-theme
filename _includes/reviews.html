<section>
    <style>
      .form-container {
        text-align: right;
        font-family: Arial, sans-serif;
      }
      .heart-button {
        font-family: Arial, sans-serif;
        font-size: 14px;
        background-color: red;
        color: white;
        border: none;
      }
      .review-icon {
        font-size: 24px;
        color: red;
        margin-right: 10px;
      }
    </style>
    <div class="form-container">
      <br>
      <br>
      <br>
      <br>
      <input id="search" placeholder="Search">
      <button onclick="search()">Search</button>
      <br>
      <br>
      <input id="reviewername" placeholder="Reviewer Name">
      <input id="age" placeholder="Age">
      <input id="reviewtext" placeholder="Review">
      <input id="contact" placeholder="Contact">
      <button onclick="addReview()">Save</button>
      <br>
      <br>
    </div>
    
    <div id="reviewIcons" style="text-align: center;"></div>
    
    <script>
      Review();
      function Review() {
        const options = {
          method: 'GET',
          cache: 'default',
          headers: {
            'Content-Type': 'application/json'
          },
        };
        const url = "https://dating.dontntntnt.de/api/review/";
        fetch(url, options)
          .then(res => res.json())
          .then(data => {
            console.log(data);
            console.log(typeof data);
            console.log(JSON.stringify(data));
            for (let i = 0; i < data.length; i++) {
              addReviewIcon(data[i].reviewtext);
            }
          });
      }
      function addReview() {
        const postOptions = {
          method: 'POST',
          cache: 'default',
          headers: {
            'Content-Type': 'application/json'
          },
        };
        var url = "https://dating.dontntntnt.de/api/review/add";
        url += "?name=" + document.getElementById("reviewername").value;
        url += "&Age=" + document.getElementById("age").value;
        url += "&Review=" + document.getElementById("reviewtext").value;
        url += "&Contact=" + document.getElementById("contact").value;
        fetch(url, postOptions)
          .then(response => {
            if (response.status !== 200) {
              error("PUT API response failure: " + response.status);
              return;
            }
            response.json().then(data => {
              console.log(data);
              addReviewIcon(data.reviewtext);
            });
          })
          .catch(err => {
            console.log(err + " ");
          });
      }

      function addReviewIcon(reviewtext) {
        const reviewIcons = document.getElementById("reviewIcons");
        const icon = document.createElement("i");
        icon.classList.add("fas", "fa-heart", "review-icon");
        reviewIcons.appendChild(icon);
        reviewIcons.appendChild(document.createTextNode(reviewtext));
        reviewIcons.appendChild(document.createElement("br"));
      }
      
      function removeReviewIcons() {
        const reviewIcons = document.getElementById("reviewIcons");
        while (reviewIcons.firstChild) {
          reviewIcons.removeChild(reviewIcons.firstChild);
        }
      }
    </script>  
</section>

