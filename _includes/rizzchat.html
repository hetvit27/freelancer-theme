<section>
  <html>
    <head>
      <meta charset="UTF-8" />
      <title>Rizz with Chad</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          font-size: 16px;
        }
        .chatbox {
          height: 400px;
          overflow: auto;
          border: 1px solid #ccc;
          padding: 10px;
        }
        .message {
          margin-bottom: 10px;
        }
        .user {
          color: blue;
        }
        .bot {
          color: green;
        }
        input[type="text"] {
          width: 100%;
          padding: 10px;
          box-sizing: border-box;
          border: 1px solid #ccc;
        }
      </style>
    </head>
    <body>
      <h1>General Rizz with Chad</h1>
      <div class="chatbox" id="chatbox"></div>
      <input type="text" id="message" placeholder="Ask about rizz here..." />
      <button id="send">Send</button>
      <script>
        var chatbox = document.getElementById("chatbox");
        var message = document.getElementById("message");
        var send = document.getElementById("send");

        send.addEventListener("click", function () {
          var userMessage = message.value;
          var userDiv = document.createElement("div");
          userDiv.className = "message user";
          userDiv.innerHTML = "<strong>You:</strong> " + userMessage;
          chatbox.appendChild(userDiv);

          message.value = "";

          const url = "https://dating.dontntntnt.de/api/chat/generate";
          const key = "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"; //liability? might need to find a way to plug this in separately?

          var myHeaders = new Headers();
          myHeaders.append("Content-Type", "application/json");

          var data = { prompt: userMessage, key: key };

          var requestOptions = {
            method: "POST",
            headers: myHeaders,
            mode: "cors",
            cache: "default",
            credentials: "include",
            redirect: "manual",
            body: JSON.stringify(data),
          };

          fetch(url, requestOptions)
            .then((response) => response.text())
            .then((text) => {
              console.log(text);
              var botDiv = document.createElement("div");
              botDiv.className = "message bot";
              botDiv.innerHTML = "<strong>Chad:</strong> " + text;
              chatbox.appendChild(botDiv);

              chatbox.scrollTop = chatbox.scrollHeight;
            });
        });
      </script>
    </body>
  </html>
</section>
